<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Search Engine</title>
    <link rel="icon" href="https://www.google.com/images/branding/googlelogo/1x/googlelogo_color_272x92dp.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="./style.css">
    <style>
      .gsc-tabsArea{
        display: none !important;
      }
      .accordion {
        background-color: #eee;
        color: #444;
        cursor: pointer;
        padding: 18px;
        width: 100%;
        text-align: left;
        border: none;
        outline: none;
        transition: 0.4s;
      }
      .active, .accordion:hover {
        background-color: #ccc;
      }
      .panel {
        padding: 0 18px;
        background-color: white;
        display: none;
        overflow: hidden;
      }
      .banner{
        background-color: #f2f2f2;
        padding: 20px;
        text-align: center;
        height: 200px;
        margin-bottom: 10px;
      }
      .tabcontent{
        display: none;
      }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body style="background-color: white;">
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" style="background-color: #ffede7;">
    <div class="container">
       <a class="navbar-brand" href="#" style="color: black;">Mouri</a>
       <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
       <span class="navbar-toggler-icon"></span>
       </button>
       <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ml-auto" >
             <li class="nav-item" onclick="openPage(event, 'home')">
                <a class="nav-link" href="#" style="color: black;">HOME</a>
             </li>
             <li class="nav-item" onclick="openPage(event, 'search')">
                <a class="nav-link" href="#" style="color: black;">SEARCH</a>
            </li>
             <li class="nav-item" onclick="openPage(event, 'faq')">
                <a class="nav-link" href="#" style="color: black;">FAQ</a>
             </li>
             <li class="nav-item"  onclick="openPage(event, 'contact')">
                <a class="nav-link" href="#" style="color: black;">CONTACT US</a>
             </li>
          </ul>
       </div>
    </div>
 </nav>
 
  
  <div class="container" style="margin-top: 200px;margin-bottom: 100px;">
    <div class="tabcontent" id="home">
      <div class="banner">
        <h1 style="color: #333;font-size: 24px;">Welcome to My Website</h1>
        <h6 style="color: #666;font-size: 18px;text-align: center;">Explore and discover amazing things!</h6>
      </div>
    </div>
    <div class="tabcontent" id="search">
      <script async src="https://cse.google.com/cse.js?cx=51a91bbd074494a4b">
      </script>
      <select class="form-control" id="optionMenu" style="margin-bottom: 20px;">
        <option value="https://cse.google.com/cse.js?cx=51a91bbd074494a4b">Flybuys</option>
        <option value="https://cse.google.com/cse.js?cx=c327ecf0994a94a77">Qantas Frequent Flyer</option>
      </select>
      <div class="gcse-searchbox"></div>
      <div class="gcse-searchresults"></div>
    </div>
    <div class="tabcontent" id="faq"></div>
    <div class="tabcontent" id="contact">
      <div class="form-horizontal">
        <div class="form-group">
          <label class="control-label col-sm-2" for="email">Email:</label>
          <div class="col-sm-12">
            <input type="email" name="email" class="form-control" id="email" placeholder="Enter email">
          </div>
        </div>
        <div class="form-group">
          <label class="control-label col-sm-2" for="pwd">Content:</label>
          <div class="col-sm-12">
            <textarea type="text" name="content" class="form-control" id="pwd" placeholder="Enter content"></textarea>
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-12">
            <button type="button" class="btn btn-outline-success form-control" id="send_contact_us">Send Us</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <footer style="background-color: #ffede7;" style="position: absolute; bottom: 0px;">
    <div class="container p-4">
      <div class="row">
        <div class="col-lg-3 col-md-6 mb-4">
          <ul class="list-unstyled mb-0">
            <li class="mb-1" >
              <a href="#!" style="color: #4f4f4f;">Home</a>
            </li>
            <li class="mb-1" >
              <a href="#!" style="color: #4f4f4f;">FAQ</a>
            </li>
            <li class="mb-1">
              <a href="#!" style="color: #4f4f4f;">Contact US</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2);">
      Â© 2023 Copyright:
      <a class="text-dark" href="https://mdbootstrap.com/">GoogleSearchEngine.com</a>
    </div>
  </footer>
</body>
<script>
    document.getElementById('home').style.display = "block";
    const myResultsReadyCallback = function(name, q, promos, results, resultsDiv) {
      const makePromoElt = (promo) => {
        const anchor = document.createElement('a');
        anchor.href = promo['url'];
        anchor.target = '_blank';
        anchor.classList.add('gs-title');
        const span = document.createElement('span');
        span.innerHTML = 'Promo: ' + promo['title'];
        anchor.appendChild(span);
        return anchor;
      };
      const makeResultParts = (result) => {
        const anchor = document.createElement('a');
        anchor.href = result['url'];
        anchor.target = '_blank';
        anchor.classList.add('gs_title');
        anchor.appendChild(document.createTextNode( 'https'+ result['url'].split('https')[2].substring(0,90) + '....'));
        const span = document.createElement('span');
        span.innerHTML = '<h5 style="text-align:center;color:#7f4722">'+ result.title +'</h5><br />' + result['content'] + '<hr />' + '<h6 style="text-align:center;color:red;font-weight:bold">' + `${typeof result.richSnippet.offer === 'undefined'?'':result.richSnippet.offer.price + '&nbsp;' + result.richSnippet.offer.pricecurrency}` + '</h6><br />';
        const imageTag = document.createElement('img');
        imageTag.src = result['thumbnailImage'].url;
        imageTag.className = 'img-fuild';
        imageTag.style.height = result.thumbnailImage.height + 'px';
        imageTag.style.width = result.thumbnailImage.width + 'px';
        const imageDiv = document.createElement('div');
        imageDiv.appendChild(imageTag);
        return [anchor, span, imageDiv];
        };
      const table = document.createElement('table');
      if (promos) {
        for (const promo of promos) {
          const row = table.insertRow(-1);
          const cell = row.insertCell(-1);
          cell.appendChild(makePromoElt(promo));
        }
        resultsDiv.appendChild(table);
        resultsDiv.appendChild(document.createElement('br'));
      }
      if (results) {
        const container = document.createElement('div');
        container.className = 'container';
        const row = document.createElement('div');
        row.className = 'row';
        for (const result of results) {
            const column = document.createElement('div');
            column.className = 'col-md-4';
            const card = document.createElement('div');
            card.className = 'card';
            const cardBody = document.createElement('div');
            cardBody.className = 'card-body';
            const [anchor, span, imageDiv] = makeResultParts(result);
            cardBody.appendChild(imageDiv);
            cardBody.appendChild(span);
            cardBody.appendChild(anchor);
            card.appendChild(cardBody);
            column.appendChild(card);
            row.appendChild(column);
          }
          container.appendChild(row);
          resultsDiv.appendChild(container);
      }
      return true;
    };

    window.__gcse || (window.__gcse = {});
    window.__gcse.searchCallbacks = {
      web: {
        ready: myResultsReadyCallback,
      },
    };

</script>
<script>
  function openPage(event, pageName){
      var i, tabcontent, tablinks;
      tabcontent = document.getElementsByClassName('tabcontent');
      for(i = 0; i < tabcontent.length; i++){
        tabcontent[i].style.display = "none"
      }
      tablinks = document.getElementsByClassName('nav-item');
      for(i = 0; i < tablinks.length; i ++){
        tablinks[i].className = tablinks[i].className.replace("active", "")
      }
      document.getElementById(pageName).style.display = "block";
      event.currentTarget.className += "active";
    }
</script>
<script>
  $(document).ready(function(){
    $.ajax({
      url : 'http://localhost:5000/get-banner',
      method : "GET",
      success : function(response){
        console.log(response.banner[0].filename)
        const banner = document.getElementsByClassName('banner')[0];
        banner.style.backgroundImage = 'url(http://localhost:5000/upload/' + response.banner[0].filename + ')';
        banner.querySelector('h1').innerHTML = response.banner[0].title;
        banner.querySelector('h6').innerHTML = response.banner[0].content;
      },
      error : function(xhr, status, err){
        console.log(err)
      }
    })

    $.ajax({
      url : 'http://localhost:5000/get-faq',
      method : "GET",
      success : function(response){
        console.log(response);
        var container = document.getElementById('faq');
        for(var i = 0; i < response.faq.length; i ++){
          var button = document.createElement("button");
          button.className = "accordion";
          button.textContent = response.faq[i].title;
          button.onclick = openSection;
          var panel = document.createElement("div");
          panel.className = "panel";
          var paragraph = document.createElement("p");
          paragraph.textContent = response.faq[i].content;
          panel.appendChild(paragraph);
          container.appendChild(button);
          container.appendChild(panel);
        }
      },
      error : function(xhr, status, err){
        console.log(err)
      }
    })
    
  });
  const selectElement = document.getElementById('optionMenu');
  const scriptElement = document.createElement('script');
  selectElement.addEventListener('change', function(){
    const selectedOption = selectElement.options[selectElement.selectedIndex];
    const newSrc = selectedOption.value;
    const existingScript = document.querySelector('script[src^="https://cse.google.com/cse.js"]');
    if (existingScript) {
      console.log(existingScript)
      existingScript.remove();
    }
    scriptElement.src  = newSrc;
    scriptElement.async = true;
    document.body.appendChild(scriptElement);
  });
  
  function openSection(){
    this.classList.toggle("active");
    var panel = this.nextElementSibling;
    if (panel.style.display === "block") {
      panel.style.display = "none";
    } else {
      panel.style.display = "block";
    }
  }

  $('#send_contact_us').click(function(){
    const email = $('input[name="email"]').val();
    const content = $('textarea[name="content"]').val();
    $.ajax({
      url : 'http://localhost:5000/save_contact_us',
      method : "POST",
      data : {
        email : email,
        content : content
      },
      success : function(response){
        $('input[name="email"]').val("");
        $('textarea[name="content"]').val("");
      },
      error : function(xhr, status, err){
        console.log(err)
      }
    })
  })  
</script>
</html>